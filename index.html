<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For My Kiara ♡</title>

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#fce7f3" />
  <link rel="apple-touch-icon" href="icon-192.png" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Custom Tailwind Config -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            handwriting: ['"Cedarville Cursive"', 'cursive'],
            display: ['"Playfair Display"', 'serif'],
            sans: ['"Inter"', 'system-ui', 'sans-serif'],
          },
          colors: {
            pastel: {
              pink: '#fce7f3',
              rose: '#f9a8d4',
              lavender: '#e9d5ff',
              mint: '#c5f6e9',
              peach: '#ffdac1',
              sky: '#dbeafe',
            }
          },
          animation: {
            'float-slow': 'float 10s ease-in-out infinite',
            'gentle-bob': 'bob 4s ease-in-out infinite',
            'fade-up': 'fadeUp 1.2s ease-out forwards',
            'heartbeat-slow': 'heartbeat 4s ease-in-out infinite',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-12px)' },
            },
            bob: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-8px)' },
            },
            fadeUp: {
              '0%': { opacity: '0', transform: 'translateY(20px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            heartbeat: {
              '0%, 100%': { transform: 'scale(1)' },
              '14%': { transform: 'scale(1.08)' },
              '28%': { transform: 'scale(1)' },
              '42%': { transform: 'scale(1.08)' },
              '70%': { transform: 'scale(1)' },
            }
          }
        }
      }
    }
  </script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700&family=Cedarville+Cursive&display=swap" rel="stylesheet">

  <!-- Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

  <!-- Particles.js -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

  <style>
    .glass {
      background: rgba(255, 255, 255, 0.35);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    body {
      background: linear-gradient(135deg, #fce7f3 0%, #e9d5ff 30%, #dbeafe 60%, #c5f6e9 100%);
      min-height: 100vh;
    }
    /* Hide scrollbar but keep scrolling functionality */
    ::-webkit-scrollbar {
      display: none;
    }
    body, html {
      -ms-overflow-style: none;  /* IE and Edge */
      scrollbar-width: none;     /* Firefox */
    }
  </style>
</head>
<body class="min-h-screen text-gray-800 font-sans">

  <div id="particles-js" class="fixed inset-0 pointer-events-none opacity-60"></div>

  <div class="relative z-10 min-h-screen flex flex-col lg:max-w-4xl lg:mx-auto">

    <!-- Mobile Top Navigation Bar -->
    <nav class="glass border-b border-white/30 bg-white/20 backdrop-blur-lg z-50 flex justify-around py-4 md:hidden fixed top-0 left-0 right-0">
      <button data-section="home" class="nav-btn p-3 text-2xl text-pastel-rose transition active:scale-110"><i class="fas fa-home"></i></button>
      <button data-section="song" class="nav-btn p-3 text-2xl text-pastel-rose transition active:scale-110"><i class="fas fa-music"></i></button>
      <button data-section="treasures" class="nav-btn p-3 text-2xl text-pastel-rose transition active:scale-110"><i class="fas fa-gift"></i></button>
      <button data-section="messages" class="nav-btn p-3 text-2xl text-pastel-rose transition active:scale-110"><i class="fas fa-envelope"></i></button>
    </nav>

    <!-- Desktop Side Navigation -->
    <aside class="hidden md:flex fixed left-0 top-0 bottom-0 w-20 glass flex-col items-center py-10 space-y-10 shadow-2xl z-50">
      <div class="text-4xl animate-heartbeat-slow text-pastel-rose mb-8">♡</div>
      <button data-section="home" class="nav-btn p-4 text-3xl text-pastel-rose transition hover:scale-125"><i class="fas fa-home"></i></button>
      <button data-section="song" class="nav-btn p-4 text-3xl text-pastel-rose transition hover:scale-125"><i class="fas fa-music"></i></button>
      <button data-section="treasures" class="nav-btn p-4 text-3xl text-pastel-rose transition hover:scale-125"><i class="fas fa-gift"></i></button>
      <button data-section="messages" class="nav-btn p-4 text-3xl text-pastel-rose transition hover:scale-125"><i class="fas fa-envelope"></i></button>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 md:ml-20 pt-20 md:pt-8 pb-8 overflow-y-auto px-4">

      <!-- Header -->
      <header class="text-center mb-12 animate-fade-up">
        <div class="text-6xl mb-4 animate-heartbeat-slow">♡</div>
        <h1 class="text-4xl md:text-5xl font-handwriting text-pastel-rose">For my Kiara</h1>
        <p class="mt-4 text-lg text-gray-700">You make my world softer and sweeter every day ♡</p>
      </header>

      <!-- Sections -->
      <section id="home" class="section space-y-10">
        <div class="glass rounded-3xl p-8 shadow-xl text-center animate-fade-up">
          <p class="text-lg leading-relaxed text-gray-700">
            Kiara ♡<br><br>
            Just thinking about your smile makes my heart feel all warm and fuzzy.<br>
            You're my favorite notification, my coziest thought, and the sweetest part of my day.
          </p>
          <p id="countdown" class="mt-8 text-pastel-rose font-handwriting text-2xl"></p>
        </div>

        <button onclick="revealLove()" class="glass py-6 rounded-3xl text-xl font-medium shadow-xl hover:shadow-2xl transition hover:scale-105">
          There's something I've been wanting to say...
        </button>

        <div id="loveMessage" class="hidden space-y-8">
          <div class="glass rounded-3xl p-10 text-center animate-gentle-bob">
            <p class="text-3xl font-handwriting text-pastel-rose mb-6">My darling Kiara,</p>
            <p class="text-lg leading-loose text-gray-700">
              You are my calm in the chaos,<br>
              my laughter on quiet days,<br>
              the person who makes everything feel just right.<br><br>
              I don't just love you —<br>
              you feel like home to me ♡
            </p>
            <p class="text-4xl font-handwriting text-pastel-rose mt-8">Forever yours</p>
          </div>
        </div>
      </section>

      <section id="song" class="section hidden text-center space-y-8">
        <p class="text-2xl font-handwriting text-pastel-rose">This song always reminds me of you ♡</p>
        <div class="glass rounded-3xl p-5 shadow-xl">
          <iframe src="https://open.spotify.com/embed/track/0PqiJTvvmEiV3rTZcQ7SIS" width="100%" height="380" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" class="rounded-2xl"></iframe>
        </div>
      </section>

      <section id="treasures" class="section hidden text-center space-y-10">
        <div id="locked">
          <p class="text-xl font-handwriting text-pastel-rose mb-8">My little collection of your sweetest moments ♡</p>
          <button onclick="showPassword()" class="glass py-6 px-12 rounded-full text-lg font-medium shadow-xl hover:scale-105 transition">
            Unlock with a smile
          </button>
        </div>

        <div id="passwordBox" class="hidden space-y-6">
          <input type="text" id="passwordInput" placeholder="Hint: the prettiest name ♡" class="w-full max-w-sm glass py-5 px-8 rounded-full text-center text-lg">
          <button onclick="checkPassword()" class="glass py-5 px-14 rounded-full font-medium shadow-xl hover:scale-105 transition">
            Open ♡
          </button>
        </div>

        <div id="gallerySection" class="hidden">
          <p class="text-xl font-handwriting text-pastel-rose mb-8">I treasure every single one because they're you</p>
          <div id="gallery" class="grid grid-cols-2 gap-5"></div>
        </div>
      </section>

      <section id="messages" class="section hidden space-y-8">
        <h2 class="text-3xl text-center font-handwriting text-pastel-rose">Our sweet notes ♡</h2>
        <div id="messagesContainer" class="space-y-5 max-h-96 overflow-y-auto glass p-6 rounded-3xl"></div>
        <div class="glass rounded-3xl p-6">
          <textarea id="messageInput" rows="3" placeholder="Write something cute... it appears instantly ♡" class="w-full bg-transparent resize-none focus:outline-none text-lg"></textarea>
          <button onclick="sendMessage()" class="mt-5 w-full py-4 bg-pastel-rose bg-opacity-70 rounded-2xl font-medium hover:bg-opacity-90 transition">
            Send ♡
          </button>
        </div>
      </section>
    </main>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
    // Firebase config (replace with yours)
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT-default-rtdb.firebaseio.com",
      projectId: "YOUR_PROJECT",
      storageBucket: "YOUR_PROJECT.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const messagesRef = db.ref('messages');

    // Soft floating hearts
    particlesJS("particles-js", {
      particles: {
        number: { value: window.innerWidth < 768 ? 30 : 60 },
        color: { value: ["#f9a8d4", "#e9d5ff", "#c5f6e9", "#ffffff"] },
        shape: { type: "heart" },
        opacity: { value: 0.4, random: true },
        size: { value: 25, random: true },
        move: { enable: true, speed: 1, direction: "none", random: true }
      },
      interactivity: { events: { onhover: { enable: true, mode: "repulse" } } }
    });

    // Navigation
    document.querySelectorAll('.nav-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('text-pastel-rose', 'opacity-100'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.add('opacity-60'));
        btn.classList.remove('opacity-60');
        btn.classList.add('text-pastel-rose', 'opacity-100');

        document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
        document.getElementById(btn.dataset.section).classList.remove('hidden');

        confetti({ particleCount: 60, spread: 90, origin: { y: 0.8 }, colors: ['#fce7f3', '#f9a8d4', '#e9d5ff'] });
      });
    });

    // Initial active state
    document.querySelector('[data-section="home"]').classList.add('text-pastel-rose', 'opacity-100');

    // Countdown (current date: Dec 15, 2025 → next Friday is Dec 19)
    function updateCountdown() {
      const now = new Date();
      let nextFriday = new Date(now);
      let daysToAdd = (5 - now.getDay() + 7) % 7;
      if (daysToAdd === 0) daysToAdd = 7;
      nextFriday.setDate(now.getDate() + daysToAdd);
      nextFriday.setHours(0,0,0,0);

      const diff = nextFriday - now;
      const days = Math.floor(diff / (1000*60*60*24));
      const hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));

      document.getElementById('countdown').innerHTML = 
        `Only <span class="text-3xl">${days}</span> days & <span class="text-3xl">${hours}</span> hours<br>until I get to hug you ♡`;
    }
    updateCountdown();
    setInterval(updateCountdown, 3600000);

    // Love reveal
    function revealLove() {
      document.getElementById('loveMessage').classList.remove('hidden');
      confetti({ particleCount: 300, spread: 120, colors: ['#fce7f3', '#f9a8d4', '#e9d5ff', '#c5f6e9'] });
    }

    // Treasures
    function showPassword() {
      document.getElementById('locked').classList.add('hidden');
      document.getElementById('passwordBox').classList.remove('hidden');
    }
    function checkPassword() {
      if (document.getElementById('passwordInput').value.trim().toLowerCase() === 'kiara') {
        document.getElementById('passwordBox').classList.add('hidden');
        document.getElementById('gallerySection').classList.remove('hidden');
        loadGallery();
        confetti({ particleCount: 400, spread: 150 });
      } else {
        alert("Almost... try the name that makes me smile the most ♡");
      }
    }
    function loadGallery() {
      const gallery = document.getElementById('gallery');
      if (gallery.children.length) return;
      for (let i = 0; i <= 12; i++) {
        const img = document.createElement('img');
        img.src = `assets/images/${i}.jpeg`;
        img.className = "rounded-2xl object-cover w-full h-64 shadow-lg cursor-pointer hover:scale-105 transition";
        img.onclick = () => openLightbox(img.src);
        gallery.appendChild(img);
      }
      ['kiara.mp4', 'kiara2.mp4', 'kiara3.mp4', 'kiara4.mp4'].forEach(src => {
        const video = document.createElement('video');
        video.src = `assets/videos/${src}`;
        video.controls = true;
        video.className = "rounded-2xl w-full h-64 object-cover shadow-lg";
        gallery.appendChild(video);
      });
    }
    function openLightbox(src) {
      const lb = document.createElement('div');
      lb.className = 'fixed inset-0 bg-white bg-opacity-95 flex items-center justify-center z-50 backdrop-blur-sm';
      lb.onclick = () => lb.remove();
      const img = document.createElement('img');
      img.src = src;
      img.className = 'max-w-full max-h-full rounded-3xl shadow-2xl';
      lb.appendChild(img);
      document.body.appendChild(lb);
    }

    // Messages
    function sendMessage() {
      const input = document.getElementById('messageInput');
      const text = input.value.trim();
      if (!text) return;
      messagesRef.push({ text, timestamp: Date.now() });
      input.value = '';
      confetti({ particleCount: 50, spread: 70 });
    }
    messagesRef.on('child_added', snap => {
      const msg = snap.val();
      const div = document.createElement('div');
      div.textContent = msg.text;
      div.className = 'glass p-6 rounded-3xl text-lg shadow-md animate-fade-up';
      document.getElementById('messagesContainer').appendChild(div);
      div.scrollIntoView({ behavior: 'smooth' });
    });

    // PWA Service Worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js');
    }
  </script>
</body>
</html>